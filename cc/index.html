<!DOCTYPE html>
<html>

<head>
	<title></title>
	<meta charset="utf-8" />
	<script>
		var order = 1;
		var number = new Array();
		number[1] = new Array();
		number[2] = new Array();
		number[3] = new Array();
		plus_minus = new Array();//1 for positive and -1 for negative.
		var isDecimal = new Array();
		var decimalPart = new Array();
		var transfer = new Array();//中转
		var operate = 0;
		var operator1 = "";
		function input(a) {
			transfer = number[order].concat([]);
			transfer.unshift(a);
			number[order] = transfer.concat([]);
			output();
		}
		function operator(a, b) {
			order = 2;
			operate = a;
			operator1 = b;
			number[2] = [];
			number[3] = [];
			output();
		}
		function output() {
			transfer = number[1].concat([]);
			document.getElementById("p").innerHTML = transfer.reverse().join("");
			transfer = number[2].concat([]);
			document.getElementById("p").innerHTML += (order === 1 ? "" : operator1 + transfer.reverse().join(""));
		}
		function equal() {
			number[3] = [];
			if (operate === 1) { addition(); }
			if (operate === 2) { subtraction(); }
			if (operate === 3) { multiplication(); }
			if (operate === 4) { division; }
			optimize(3);
			output();
			number[1] = number[3].concat([]);
			transfer = number[3].concat([]);
			document.getElementById("p").innerHTML += "=" + transfer.reverse().join("");
		}
		function addition() {
			var bits = number[1].length <= number[2].length ? number[2].length : number[1].length;
			for (var i = 0; i < bits; i++) {
				number[3][i] = ((number[1][i] === undefined) ? 0 : number[1][i]) + ((number[2][i] === undefined) ? 0 : number[2][i]);
			}
			for (var i = 0; i < bits; i++) {
				while (number[3][i] >= 10) {
					number[3][i + 1] = number[3][i + 1] === undefined ? 1 : number[3][i + 1] + 1;
					number[3][i] -= 10;
				}
			}
		}
		function subtraction() {

		}
		function multiplication() {

		}
		function division() {

		}
		function optimize(a) {
			transfer = number[a].concat([]);
			while (transfer.pop() === 0) {
				number[a] = transfer.concat([]);
			}
		}
		function positive_or_negative() {
		}
		function C() {
			order = 1;
			number[1] = [];
			number[2] = [];
			number[3] = [];
			operate = 0;
			operator1 = "";
			output();
		}
	</script>
	<style>
		button {
			width: 56.6px;
			height: 35px;
		}

		.small {
			font-size: 9px;
		}
	</style>
</head>

<body>
	<table>
		<tr>
			<td>
				<h1 id="p"></h1>
			</td>
		</tr>
	</table>
	<table>
		<tr>
			<td><button onclick="">%</button></td>
			<td><button onclick="">CE</button></td>
			<td><button onclick="C ()">C</button></td>
			<td><button onclick="" class="small">Backspace</button></td>
		</tr>
		<tr>
			<td><button onclick=""><sup>1</sup>/<sub>x</sub></button></td>
			<td><button onclick="">x<sup>2</sup></button></td>
			<td><button onclick=""><sup>2</sup>√x</button></td>
			<td><button onclick="operator(4,'/')">/</button></td>
		</tr>
		<tr>
			<td><button onclick="input (7)">7</button>
			<td><button onclick="input (8)">8</button></td>
			<td><button onclick="input (9)">9</button></td>
			<td><button onclick="operator(3,'*')">*</button></td>
		</tr>
		<tr>
			<td><button onclick="input (4)">4</button></td>
			<td><button onclick="input (5)">5</button></td>
			<td><button onclick="input (6)">6</button></td>
			<td><button onclick="operator(2,'-')">-</button></td>
		</tr>
		<tr>
			<td><button onclick="input (1)">1</button></td>
			<td><button onclick="input (2)">2</button></td>
			<td><button onclick="input (3)">3</button></td>
			<td><button onclick="operator(1,'+')">+</button></td>
		</tr>
		<tr>
			<td><button onclick="positive_or_negative ()"><sup>+</sup>/<sub>-</sub></button></td>
			<td><button onclick="input (0)">0</button></td>
			<td><button onclick="">.</button></td>
			<td><button onclick="equal ()">=</button></td>
		</tr>
	</table>
</body>

</html>